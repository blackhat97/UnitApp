<ion-header>
  <ion-toolbar>
    <ion-title>{{"SETTING" | translate}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <div class="profile">
    <ion-card no-margin *ngFor="let profile of profiles">
      <ion-card-content>
          <!--
          <img src="assets/img/profile.png">
          -->
          <h2 style="color: white;" class="fw500">{{profile.email}}</h2>
          <p style="color: white;">{{"DEVICE_NUMBER" | translate}} : {{ device }}</p>
      </ion-card-content>
    </ion-card>
  </div>
  
  <ion-segment [(ngModel)]="segment" scrollable>
    <ion-segment-button value="0"> 
        {{"PROFILE" | translate}}
    </ion-segment-button>
    <ion-segment-button value="1">
        {{"VESSEL_INPUT" | translate}}
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="segment">
    <ion-list *ngSwitchCase="0">
        <ion-list lines="none" class="app-list" mode="md">
            <ion-item [routerLink]="['/app/bluetooths']">
              <ion-icon slot="start" name="bluetooth"></ion-icon>
              <ion-label>
              <h2>{{"BLUETOOTH_SETTING" | translate}}</h2>
              </ion-label>
            </ion-item>
            <ion-item (click)="changePassword()">
              <ion-icon slot="start" name="create"></ion-icon>
              <ion-label>
                <h2>{{"CHANGE_PASSWORD" | translate}}</h2>
              </ion-label>
            </ion-item>
            <ion-item>
              <ion-icon slot="start" name="globe"></ion-icon>
              <ion-label>
                <h2>언어설정</h2>
              </ion-label>
              <ion-select [(ngModel)]="languageSelected" (ionChange)="setLanguage()" okText="{{ 'CHOOSE' | translate }}" cancelText="{{ 'CANCEL' | translate }}">
                <ion-select-option *ngFor="let item of languages" [value]="item.code">
                  {{item.name}}
                </ion-select-option>
              </ion-select>
            </ion-item>
            <ion-item-divider lines="none"></ion-item-divider>
            <ion-item button (click)="onLoggedout()">
              <ion-icon slot="start" name="log-out"></ion-icon>
              <ion-label>
                <h2>{{"LOGOUT" | translate}}</h2>
              </ion-label>
            </ion-item>  
          </ion-list>
    </ion-list>
    <ion-list *ngSwitchCase="1">

      <div *ngIf="isEditItems" >
      
        <ion-list *ngFor="let common of commons">
          <ion-item class="input-font" >
              <ion-label fixed>{{"VESSEL_MASS" | translate}}</ion-label>
              <ion-label>{{common.mass}}</ion-label>
              <span item-right>g</span>      
          </ion-item>
          <ion-item>
              <ion-label>{{"VESSEL_MASS_FILLED_WITH_WATER" | translate}}</ion-label>
              <ion-label>{{common.water}}</ion-label>
              <span item-right>g</span>
          </ion-item>
          <ion-item>
              <ion-label>{{"VESSEL_VOLUME" | translate}}</ion-label>
              <ion-label>{{ common.water - common.mass }}</ion-label>
              <span>mL</span>
          </ion-item>
          <ion-item>
              <ion-label>{{"VESSEL_INPUT_DATE" | translate}}</ion-label>
              <ion-label>{{ common.input_date }}</ion-label>
          </ion-item>
          
          <!--
          <ion-item (click)="verifyPass()" lines="none">
            <ion-icon slot="start" name="lock"></ion-icon>
            <ion-label>
              <h2>공통된 값</h2>
            </ion-label>
          </ion-item>
          <div *ngIf="showCommon">
            <ion-row (click)="commonValue()">
              <ion-col>
                공기실용적 : {{common.air_volume}}
              </ion-col>
              <ion-col>
                Pz : {{common.pz}}
              </ion-col>
            </ion-row>
          </div>
          -->
        </ion-list>
      </div>
      <div *ngIf="!isEditItems">
          <ion-list>
              <form [formGroup]="commonForm">
                <ion-item class="input-font" >
                    <ion-label fixed>{{"VESSEL_MASS" | translate}}</ion-label>
                    <ion-input type="number" formControlName="mass"></ion-input>
                    <span item-right>g</span>      
                </ion-item>
                <ion-item>
                    <ion-label>{{"VESSEL_MASS_FILLED_WITH_WATER" | translate}}</ion-label>
                    <ion-input type="number" formControlName="water"></ion-input>
                    <span item-right>g</span>
                </ion-item>
                <ion-item>
                    <ion-label>{{"VESSEL_VOLUME" | translate}}</ion-label>
                    <ion-input type="number" [value]=commons[0].water-commons[0].mass readonly></ion-input>
                    <span>mL</span>
                </ion-item>
                <ion-item>
                    <ion-label>{{"VESSEL_INPUT_DATE" | translate}}</ion-label>
                    <ion-datetime display-format="MMM DD, YYYY"
                        monthShortNames="1월, 2월, 3월, 4월, 5월, 6월, 7월, 8월, 9월, 10월, 11월, 12월"
                        [value]="commons[0].input_date"
                        placeholder="월/일/년" done-text="선택" cancel-text="취소"
                    ></ion-datetime>
                </ion-item>
                <ion-button class="button button-block button-calm ink" data-ink-color="#9DEAFF" data-ink-opacity="1" (click)="onSubmit(commonForm.value)" fill="outline">{{"UPDATE" | translate}}</ion-button> 
              </form>
          </ion-list>
      </div>

      <br /><br /><br /><br />

      <ion-fab vertical="bottom" horizontal="end" slot="fixed">
          <ion-fab-button color="medium" class="fab" (click)="onEditCloseItems()">
            <ion-icon name="create" *ngIf="isEditItems"></ion-icon>
            <ion-icon name="close" *ngIf="!isEditItems"></ion-icon>
          </ion-fab-button>
      </ion-fab>
    </ion-list>
  </div>
</ion-content>
<ion-footer>
    <p align="center">
      {{versionNumber}}
    </p>
</ion-footer>